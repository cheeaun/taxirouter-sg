<!DOCTYPE html>
<title>TaxiRouter SG</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<script>if (/cheeaun\.github/i.test(location.hostname)) location = 'https://taxirouter.sg/';</script>
<meta name="description" content="Explore available taxis and taxi stands in Singapore">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="TaxiRouter SG">
<!-- metacrap: https://adactio.com/journal/9881 -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="TaxiRouter SG">
<meta name="twitter:url" property="og:url" content="https://taxirouter.sg">
<meta name="twitter:title" property="og:title" content="TaxiRouter SG">
<meta name="twitter:description" property="og:description" content="Explore available taxis and taxi stands in Singapore">
<meta name="twitter:image" property="og:image" content="https://taxirouter.sg/assets/preview.png">
<!-- end metacrap -->
<style>a,button{color:#4285f4}button,header{cursor:pointer;padding:10px}#map,body,html{height:100%}#about,#info-taxis{background-color:rgba(255,255,255,.9)}#location,header{z-index:1;position:absolute}#location,header svg{vertical-align:top}#about,#bounds-warning,#info-taxis,#location,header{position:absolute}#info-taxis,button,header{padding:10px}#bounds-warning button,a:hover{text-decoration:underline}body,html{margin:0;padding:0;background-color:#B3D1FF}body,button,input{font-family:Roboto,sans-serif}a{text-decoration:none}button{font-size:1em;border:1px solid #4285f4;border-radius:5px;background-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:active{color:#fff;background-color:#4285f4}*{box-sizing:border-box}header{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}header:active{opacity:.7}header h1{margin:0;padding:0;-webkit-filter:drop-shadow(0 2px 4px rgba(0,0,0,.2));filter:drop-shadow(0 2px 4px rgba(0, 0, 0, .2))}#about{color:#333;top:0;left:0;width:100%;max-height:100%;overflow:auto;z-index:2;padding:5px 10px;-webkit-transition:-webkit-transform .3s cubic-bezier(.15,.78,.18,1.17);transition:transform .3s cubic-bezier(.15,.78,.18,1.17);-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0);pointer-events:none}#about.show{transform:translate3d(0,0,0);-webkit-transform:translate3d(0,0,0);pointer-events:auto;box-shadow:0 1px 15px rgba(0,0,0,.3)}@media screen and (min-width:500px) and (min-height:500px){#about{width:500px;left:50%;margin-left:-250px;border-radius:5px}#about.show{transform:translate3d(0,10px,0);-webkit-transform:translate3d(0,10px,0)}}#about h2{color:#111;margin:0;padding:5px 0;font-size:1.3em;font-weight:100}#about p{margin:0;padding:0 0 5px}#about ul{list-style:none;margin:0 0 5px;padding:0}#about ul li{display:inline-block;margin-right:1em}#about ul li img{vertical-align:middle;margin:0 3px}#about button{width:100%;margin:5px 0}#preview{float:right;border:1px solid #999;margin-left:10px;margin-top:5px}#info-taxis{font-size:.8em;font-weight:300;bottom:24px;right:68px;margin-left:10px;border-radius:5px;text-align:right;-webkit-transition:opacity .3s;transition:opacity .3s}#info-taxis b{font-weight:500}#info-taxis.loading{-webkit-animation:blink .75s linear infinite alternate;animation:blink .75s linear infinite alternate}@-webkit-keyframes blink{0%,100%{opacity:1}50%{opacity:.2}}@keyframes blink{0%,100%{opacity:1}50%{opacity:.2}}#location{display:none;outline:0;bottom:20px;right:10px;border:0;padding:12px;margin:0;width:48px;height:48px;background-color:#fff;border-radius:50%;overflow:hidden;box-shadow:0 2px 4px rgba(0,0,0,.2)}#location svg{fill:#666}#location.active svg{fill:#4285f4}#location-marker{-webkit-transition:border-width .3s;transition:border-width .3s;box-sizing:content-box;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);width:16px;height:16px;border-radius:50%;background-color:#4285f4;box-shadow:inset 0 0 0 2px #fff;border:10px solid rgba(66,133,244,.2);background-clip:content-box;pointer-events:none}#location-marker.compass:after{content:'';display:inline-block;border-left:4px solid transparent;border-bottom:6px solid #4285f4;border-right:4px solid transparent;width:0;height:0;position:absolute;left:4px;top:-6px}#bounds-warning{bottom:30px;left:10px;display:none;padding:10px;background-color:rgba(0,0,0,.7);-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);color:#fff}#bounds-warning button{display:inline;padding:0;border:0;color:#fff}#bounds-warning.visible{display:block}</style>
<link rel="canonical" href="https://taxirouter.sg">
<link rel="dns-prefetch" href="https://data.gov.sg">
<header id="heading">
  <h1>
    <svg viewbox="0 0 48 48" width="48" height="48">
      <title>TaxiRouter SG</title>
      <circle cx="24" cy="24" r="22.7" fill="#fff" stroke="#00454d" stroke-width="2.6"/>
      <path fill="#00454d" d="M32.92 16.28c-.26-.76-.98-1.302-1.83-1.302h-3.223V12.4h-7.734v2.578H16.91c-.85 0-1.558.54-1.83 1.302L12.4 24v10.31c0 .71.58 1.29 1.29 1.29h1.288c.71 0 1.29-.58 1.29-1.29v-1.288h15.465v1.29c0 .708.58 1.288 1.29 1.288h1.288c.71 0 1.29-.58 1.29-1.29V24l-2.68-7.72zM16.91 29.156c-1.07 0-1.932-.864-1.932-1.934 0-1.07.863-1.933 1.933-1.933s1.94.86 1.94 1.93c0 1.07-.86 1.93-1.93 1.93zm14.18 0c-1.07 0-1.934-.864-1.934-1.934 0-1.07.863-1.933 1.933-1.933s1.93.86 1.93 1.93c0 1.07-.87 1.93-1.94 1.93zM14.977 22.71l1.933-5.8h14.18l1.932 5.8H14.978z"/>
      <circle cx="38.4" cy="38.4" r="9.6" fill="#ef2c2e"/>
      <path fill="#fff" d="M35.042 42.152c-.563 0-1.102-.096-1.616-.287-.514-.19-.99-.485-1.428-.88l.772-.918c.354.306.712.54 1.073.704.36.17.772.25 1.23.25.396 0 .71-.08.943-.25.233-.16.35-.39.35-.66v-.02c0-.13-.024-.25-.07-.35-.044-.1-.128-.19-.25-.28-.122-.09-.29-.17-.5-.25-.213-.07-.49-.15-.832-.23-.39-.09-.736-.19-1.04-.3-.302-.11-.556-.25-.762-.41-.205-.16-.362-.36-.47-.6-.108-.23-.162-.52-.162-.85v-.02c0-.32.062-.6.186-.86s.295-.49.51-.67c.218-.18.48-.33.785-.43.31-.1.64-.16 1-.16.54 0 1.02.08 1.45.24.43.16.83.39 1.21.69l-.68.97c-.33-.24-.66-.43-.99-.56-.32-.13-.65-.19-.99-.19-.37 0-.66.09-.87.25-.2.17-.31.37-.31.62v.02c0 .14.03.26.08.37.05.11.14.21.27.29.13.09.31.17.54.25.23.08.51.16.86.24.39.1.73.21 1.02.32.3.12.54.26.74.43.2.17.35.37.45.6.1.23.15.49.15.79 0 .34-.06.65-.19.92s-.3.5-.53.69c-.23.19-.5.33-.82.43-.32.1-.67.15-1.05.15m6.71.02c-.57 0-1.08-.09-1.55-.28-.46-.19-.86-.46-1.19-.79-.33-.34-.58-.74-.76-1.19-.18-.46-.27-.95-.27-1.49v-.02c0-.51.09-.99.27-1.45.19-.46.45-.86.79-1.21.34-.34.74-.62 1.2-.82.46-.2.97-.3 1.52-.3.32 0 .61.02.87.07.26.04.5.11.72.19.22.08.43.18.63.3s.39.26.58.42l-.81.97c-.14-.12-.28-.23-.43-.32-.15-.1-.3-.18-.46-.25-.16-.07-.34-.12-.53-.16-.19-.04-.4-.06-.63-.06-.33 0-.64.07-.93.21-.29.14-.54.32-.75.56-.21.23-.38.5-.5.82-.12.31-.18.64-.18.99v.02c0 .38.06.72.18 1.04.12.32.29.6.51.83.22.23.48.41.78.55.3.13.64.2 1.02.2.35 0 .67-.05.97-.15.31-.1.57-.23.79-.4v-1.4h-1.9v-1.11h3.1v3.07c-.18.15-.38.3-.6.44-.21.14-.45.26-.7.37-.25.11-.53.19-.82.25-.29.06-.59.09-.91.09"/>
    </svg>
  </h1>
</header>
<div id="about">
  <img id="preview" src="assets/preview.png" width="160" height="160" alt="">
  <h2>TaxiRouter SG</h2>
  <p><strong>Explore</strong> available taxis and taxi stands in Singapore. See how many available taxis are around you and how far is the nearest taxi stand.</p>
  <p><a href="https://github.com/cheeaun/taxirouter-sg" target="_blank">Yet another project</a> by <a href="https://twitter.com/cheeaun" target="_blank">@cheeaun</a>. Data is copyrighted by the <a href="http://www.lta.gov.sg/" target="_blank">Land Transport Authority</a>.</p>
  <p>Sister sites: <a href="https://busrouter.sg/" target="_blank">&#x1F68D; BusRouter SG</a> <a href="https://railrouter.sg/" target="_blank">&#x1F686; RailRouter SG</a></p>
  <h2>Legend</h2>
  <ul>
    <li><img src="assets/taxi-stand.png" width="15" height="23" alt=""> Taxi stand</li>
    <li><img src="assets/taxi.png" width="9" height="8" alt=""> Taxi</li>
    <li><img src="assets/taxi.png" width="9" height="8" alt="" style="opacity: .5"> Stationary taxi</li>
  </ul>
  <p><small>Note: &apos;Stationary taxi&apos; is a taxi that hasn&apos;t moved from the its location for one minute.</small></p>
  <p><button id="about-okay" ontouchstart="">Okay</button></p>
</div>
<div id="map"></div>
<button id="location" title="Show current location">
  <svg width="24" height="24" viewbox="0 0 24 24">
    <path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>
  </svg>
</button>
<div id="info-taxis">Loading&#x2026;</div>
<div id="bounds-warning">Looks like you&apos;re lost.<br><button id="back-sg">Go back to Singapore</button>.</div>
<script>var taxiStandsOnMap=[[1.30429251101406,103.83387234072],[1.30364031324823,103.836057298702],[1.30705658427793,103.835693718294],[1.30452165570791,103.835930874103],[1.30456462093248,103.835546677871],[1.30303742217855,103.83765495747],[1.30198731673367,103.835799465402],[1.30371290605001,103.832751722991],[1.30232574695198,103.834397136841],[1.30120337531623,103.839571139812],[1.30287430859384,103.840586035522],[1.30090718307585,103.842266084874],[1.30257832712301,103.840960744274],[1.30025866050311,103.845488177553],[1.30050680633466,103.845223256871],[1.29930873943486,103.847327169012],[1.29815662992004,103.844954718055],[1.29698851682493,103.843945010584],[1.29980843622966,103.842366680253],[1.30031769005559,103.840325880621],[1.29865536276609,103.849373495468],[1.30055972591397,103.849682236075],[1.30295008824425,103.85096346414],[1.30151265890506,103.852377477233],[1.2985006805551,103.850282255203],[1.29768272298103,103.849098998462],[1.2975294955709,103.849353257593],[1.29617233399305,103.850414072502],[1.29807150568094,103.852195771133],[1.29998360991225,103.852655217489],[1.29826134856261,103.855300383639],[1.29894453297921,103.856390064813],[1.29710383108526,103.856926642278],[1.29624719984175,103.85539290285],[1.29737643300251,103.852943136075],[1.29562777476712,103.852624360399],[1.30012318744093,103.851245578793],[1.29121268923792,103.845992154615],[1.29177315666165,103.845263369874],[1.29111387313995,103.844979796753],[1.29073604580684,103.844971511221],[1.29465884235551,103.848092284926],[1.2942109389154,103.849276461011],[1.29187361712363,103.849478388053],[1.29197869865702,103.850370848721],[1.29115532879644,103.850466197796],[1.28760592304216,103.852011934768],[1.29114020012761,103.853887608599],[1.2913250595032,103.851509689713],[1.29273255393444,103.851440019675],[1.2935184503127,103.852693883979],[1.29426458546323,103.852756521798],[1.29437678787745,103.853733300557],[1.29330014202904,103.853675972427],[1.29543699354907,103.858698372944],[1.29492439269757,103.859553594449],[1.29262371295208,103.860593487566],[1.29155225049403,103.859887275298],[1.29139138284688,103.858356643234],[1.29180512767506,103.857439640066],[1.28982563808021,103.856581346912],[1.29280234412988,103.856733448259],[1.29630527715055,103.846001470387],[1.28040038369394,103.840582933231],[1.27886257384486,103.841818487018],[1.28206841727511,103.840854925149],[1.28178206052514,103.841681244819],[1.28363646069435,103.842314857654],[1.28536568536571,103.843198771366],[1.28609647427804,103.843934700241],[1.28547620680909,103.844743305286],[1.28741244899171,103.84476283019],[1.28918484589333,103.842618875804],[1.28921666575511,103.844126139158],[1.2890266029571,103.845928070128],[1.2889512123112,103.848150185878],[1.28840728799318,103.84749234893],[1.28697215748064,103.847020924218],[1.28253210794219,103.84534778464],[1.28126999002797,103.844337825731],[1.28286546740439,103.84404706879],[1.28428858776696,103.844038244737],[1.28247781918789,103.846262399419],[1.28350816024261,103.843272028393],[1.28514181015025,103.847431204813],[1.28349422554159,103.846582674268],[1.28584653738451,103.848587843337],[1.28422258746945,103.850262115505],[1.28144232577785,103.847443925376],[1.28253566711523,103.848778080785],[1.27895794376436,103.848018730157],[1.2800707607133,103.848666499783],[1.28210362779366,103.849897903554],[1.28348118708103,103.851239838467],[1.28575962794076,103.853717432581],[1.28522773490074,103.852182321829],[1.27816220507103,103.848509300564],[1.27942694804677,103.849288151202],[1.28160808749498,103.851470609648],[1.28124217521129,103.852151501022],[1.27901508799806,103.849874228117],[1.27745186202144,103.848888122367],[1.27464603568998,103.846992510702],[1.27875668993253,103.844169072884],[1.27785901543147,103.843119599294],[1.27422682548758,103.842011388214],[1.27512362438661,103.843313313157],[1.27578545319013,103.843242407843],[1.27835562881702,103.84508131647],[1.27345494090479,103.843779616283],[1.27382905941209,103.845023638505],[1.27574664904182,103.846184991128],[1.27730149272449,103.847527033695],[1.28418877920079,103.852737971828],[1.28799130416516,103.848912190025],[1.27787170762217,103.843722867275],[1.28685389981132,103.848807630899],[1.28043066615895,103.850687901883],[1.28342933345672,103.85282628302079],[1.2787643196673,103.84383197198764],[1.38201956220883,103.844544760759],[1.37011680755576,103.849249165493],[1.35064124611013,103.849145624618],[1.35139355898837,103.847751088882],[1.35153997158924,103.848112044527],[1.33420736240968,103.850395554463],[1.34103786292502,103.846038678868],[1.33378960563771,103.847067121877],[1.33118361060148,103.849731707365],[1.35493312006533,103.83131858099],[1.32281877961387,103.855022923731],[1.32469139610575,103.850804611434],[1.38338689258473,103.884866285951],[1.31825710100276,103.863421901037],[1.30694359577781,103.862553816484],[1.31978779067631,103.8619107552],[1.31086798265317,103.854855947083],[1.31090083119856,103.855976800881],[1.30321523073406,103.861428623869],[1.30295363191655,103.864770049764],[1.29960155793034,103.8633093012],[1.30521746517692,103.851619496856],[1.30346274389145,103.853056217115],[1.31640274596551,103.835680504393],[1.30570613468817,103.849466020668],[1.30702761730185,103.84999151155],[1.31281691307843,103.853430969361],[1.26462285529129,103.820610240425],[1.27620578703704,103.82017831635],[1.26589171568534,103.821504995893],[1.27850229295971,103.834613647793],[1.28106965308459,103.83923085771],[1.28880444137122,103.834788338807],[1.28656044626585,103.827906281357],[1.28468738161671,103.832600325392],[1.28285666560423,103.816904333926],[1.27409678101459,103.824881956194],[1.28922698782741,103.817183017467],[1.30247814614698,103.798709766255],[1.30236444160154,103.797990258551],[1.2950323416851,103.805529976741],[1.29422821938586,103.806501020838],[1.28828181267061,103.80344541129],[1.30641446598866,103.790195997629],[1.29334161406726,103.825128103091],[1.29990623117205,103.822661638265],[1.30515143316239,103.830413486679],[1.30726269670246,103.82913505882],[1.30737440136464,103.820086626041],[1.30722105839897,103.833260002388],[1.31193941548,103.837714785686],[1.31220498806888,103.837466221531],[1.30643505812543,103.826829601391],[1.30517936255322,103.824069949702],[1.32155434412126,103.814535907055],[1.33769592088785,103.83948529235],[1.26497,103.82307],[1.33252529604359,103.868956140587],[1.33162040663414,103.869362831205],[1.33904082961601,103.870544100226],[1.3532574092896,103.870633511689],[1.3509951192406,103.872823868701],[1.35064962891504,103.874316700695],[1.34947087540943,103.874123133099],[1.35152785589167,103.864668030681],[1.35457543114927,103.877165572661],[1.35980625308547,103.884366032897],[1.35956044888902,103.884689456201],[1.37145326525464,103.892586093925],[1.38265352177454,103.893189212891],[1.38248036427324,103.89293396663],[1.38531835849613,103.90126216014],[1.39247875930078,103.895611691027],[1.39269112558388,103.896004248686],[1.39072520526225,103.895177298646],[1.40565348941188,103.901921255914],[1.40483423034297,103.902646405824],[1.41956340864069,103.864645163562],[1.37236128171586,103.948711679146],[1.37270370763084,103.949737794757],[1.31176679451075,103.787885176419],[1.31015380574819,103.792999447198],[1.31004259901136,103.795433986026],[1.31782171735428,103.786077434806],[1.31731582190959,103.807223557845],[1.34323207217204,103.775747865198],[1.4171176157976,103.833028363828],[1.42887732124926,103.835171681874],[1.43029754760739,103.834575583921],[1.42937305212216,103.836768990917],[1.4589896841015,103.829857142122],[1.44181998970666,103.824378024257],[1.44938297069083,103.820233436663],[1.44101730946656,103.80134402714],[1.43720710992823,103.787228039509],[1.43642610917054,103.785067072321],[1.44359748657376,103.769585603936],[1.43239290772013,103.77379091699],[1.42561248188864,103.762273387818],[1.4219620705613,103.761163798858],[1.38970492435793,103.986741800399],[1.3358126638666,103.960849641193],[1.35232044254886,103.945189862184],[1.34247211029648,103.952822166945],[1.32680767718394,103.946271977177],[1.32729181077614,103.94596319775],[1.32450273190175,103.931477153745],[1.32363096079051,103.929532923134],[1.33106098400788,103.925224599944],[1.33809843799672,103.924036735496],[1.31206495035033,103.938631004254],[1.30817411128662,103.922605715552],[1.30517894855803,103.914781478711],[1.30485853994214,103.909010064601],[1.30217537889763,103.904863758429],[1.30385068066442,103.901395182311],[1.32074573869768,103.9124285657],[1.31773065744351,103.897985783481],[1.31725988619512,103.895241060737],[1.31475853356732,103.894055823822],[1.31470242564641,103.894299357187],[1.3182688354494,103.891799301916],[1.31848157860162,103.89329475005],[1.31918240728325,103.887282588659],[1.31597125693391,103.883154595275],[1.34239684293689,103.880348416617],[1.30864966860135,103.889484662444],[1.30143795122954,103.876041925861],[1.35860260502394,103.751490354444],[1.38427287921263,103.743798508905],[1.39716085402784,103.747531747627],[1.28374867003747,103.781211623366],[1.31141844617024,103.778143517761],[1.31140900063671,103.779156490511],[1.31425160644327,103.765360857385],[1.33231677185113,103.742679309513],[1.3335937382006,103.740605199084],[1.3501584451506,103.725065352927],[1.34295777055706,103.732062454655],[1.34453911381439,103.720806459054],[1.33809311867971,103.706547273572],[1.33797570886111,103.707038266053],[1.33905753045831,103.707011357932],[1.3377861621144,103.697685976483],[1.32758804456683,103.67876006073],[1.33072939816997,103.678484752704],[1.28328503345734,103.78170004311644]]
!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function n(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function i(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function s(t){var e=new FileReader;return e.readAsArrayBuffer(t),i(e)}function a(t){var e=new FileReader;return e.readAsText(t),i(e)}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(c.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(c.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!c.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},c.blob?(this.blob=function(){var t=n(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var t=n(this);if(t)return t;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=n(this);return t?t:Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return y.indexOf(e)>-1?e:t}function f(t,e){e=e||{};var r=e.body;if(f.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,r||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function p(t){var e=new o,r=t.getAllResponseHeaders().trim().split("\n");return r.forEach(function(t){var r=t.trim().split(":"),o=r.shift().trim(),n=r.join(":").trim();e.append(o,n)}),e}function l(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof o?e.headers:new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var c={iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};o.prototype.append=function(t,o){t=e(t),o=r(o);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(o)},o.prototype["delete"]=function(t){delete this.map[e(t)]},o.prototype.get=function(t){var r=this.map[e(t)];return r?r[0]:null},o.prototype.getAll=function(t){return this.map[e(t)]||[]},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,o){this.map[e(t)]=[r(o)]},o.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(o){t.call(e,o,r,this)},this)},this)},o.prototype.keys=function(){var t=[];this.forEach(function(e,r){t.push(r)});var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c.iterable&&(e[Symbol.iterator]=function(){return e}),e},o.prototype.values=function(){var t=[];this.forEach(function(e){t.push(e)});var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c.iterable&&(e[Symbol.iterator]=function(){return e}),e},o.prototype.entries=function(){var t=[];this.forEach(function(e,r){t.push([r,e])});var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return c.iterable&&(e[Symbol.iterator]=function(){return e}),e},c.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},u.call(f.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308];l.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=f,t.Response=l,t.fetch=function(t,e){return new Promise(function(r,o){function n(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var i;i=f.prototype.isPrototypeOf(t)&&!e?t:new f(t,e);var s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:p(s),url:n()},e="response"in s?s.response:s.responseText;r(new l(e,t))},s.onerror=function(){o(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&c.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this);
(function(){function t(t,n){for(var r=-1,e=t.length;++r<e&&n(t[r],r,t)!==!1;);return t}function n(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}function r(t){return t&&t.Object===Object?t:null}function e(t,n){return t="number"==typeof t||T.test(t)?+t:-1,n=null==n?F:n,t>-1&&t%1==0&&n>t}function o(){}function u(t){return"function"==typeof t?t:k}function c(t,n){return t&&Q(t,n,w)}function i(t,n){return C.call(t,n)||"object"==typeof t&&n in t&&null===H(t)}function f(t){return K(Object(t))}function l(t){return function(n){return null==n?S:n[t]}}function a(t,n){return function(r,e){if(null==r)return r;if(!g(r))return t(r,e);for(var o=r.length,u=n?o:-1,c=Object(r);(n?u--:++u<o)&&e(c[u],u,c)!==!1;);return r}}function y(t){return function(n,r,e){for(var o=-1,u=Object(n),c=e(n),i=c.length;i--;){var f=c[t?i:++o];if(r(u[f],f,u)===!1)break}return n}}function s(t){var r=t?t.length:S;return v(r)&&(W(t)||A(t)||j(t))?n(r,String):null}function p(t){var n=t&&t.constructor,r="function"==typeof n&&n.prototype||B;return t===r}function b(n,r){return"function"==typeof r&&W(n)?t(n,r):M(n,u(r))}function j(t){return h(t)&&C.call(t,"callee")&&(!J.call(t,"callee")||D.call(t)==L)}function g(t){return null!=t&&v(U(t))&&!O(t)}function h(t){return m(t)&&g(t)}function O(t){var n=d(t)?D.call(t):"";return n==E||n==I}function v(t){return"number"==typeof t&&t>-1&&t%1==0&&F>=t}function d(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function m(t){return!!t&&"object"==typeof t}function A(t){return"string"==typeof t||!W(t)&&m(t)&&D.call(t)==P}function w(t){var n=p(t);if(!n&&!g(t))return f(t);var r=s(t),o=!!r,u=r||[],c=u.length;for(var l in t)!i(t,l)||o&&("length"==l||e(l,c))||n&&"constructor"==l||u.push(l);return u}function k(t){return t}var S,x="4.6.1",F=9007199254740991,L="[object Arguments]",E="[object Function]",I="[object GeneratorFunction]",P="[object String]",T=/^(?:0|[1-9]\d*)$/,_={"function":!0,object:!0},G=_[typeof exports]&&exports&&!exports.nodeType?exports:S,N=_[typeof module]&&module&&!module.nodeType?module:S,R=r(G&&N&&"object"==typeof global&&global),V=r(_[typeof self]&&self),$=r(_[typeof window]&&window),q=r(_[typeof this]&&this),z=R||$!==(q&&q.window)&&$||V||q||Function("return this")(),B=Object.prototype,C=B.hasOwnProperty,D=B.toString,H=(z.Symbol,Object.getPrototypeOf),J=B.propertyIsEnumerable,K=Object.keys,M=a(c),Q=y(),U=l("length"),W=Array.isArray;o.keys=w,o.forEach=b,o.identity=k,o.isArguments=j,o.isArray=W,o.isArrayLike=g,o.isArrayLikeObject=h,o.isFunction=O,o.isLength=v,o.isObject=d,o.isObjectLike=m,o.isString=A,o.each=b,o.VERSION=x,($||V||{})._=o,z._=o}).call(this);
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.d3_queue=t.d3_queue||{})}(this,function(t){"use strict";function i(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function n(t){if(!t._start)try{r(t)}catch(i){t._tasks[t._ended+t._active-1]&&a(t,i)}}function r(t){for(;t._start=t._waiting&&t._active<t._size;){var i=t._ended+t._active,n=t._tasks[i],r=n.length-1,a=n[r];n[r]=e(t,i),--t._waiting,++t._active,n=a.apply(null,n),t._tasks[i]&&(t._tasks[i]=n||u)}}function e(t,i){return function(r,e){t._tasks[i]&&(--t._active,++t._ended,t._tasks[i]=null,null==t._error&&(null!=r?a(t,r):(t._data[i]=e,t._waiting?n(t):s(t))))}}function a(t,i){var n,r=t._tasks.length;for(t._error=i,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(i){}t._active=NaN,s(t)}function s(t){!t._active&&t._call&&t._call(t._error,t._data)}function o(t){return new i(arguments.length?+t:1/0)}var _="2.0.3",c=[].slice,u={};i.prototype=o.prototype={constructor:i,defer:function(t){if("function"!=typeof t||this._call)throw new Error;if(null!=this._error)return this;var i=c.call(arguments,1);return i.push(t),++this._waiting,this._tasks.push(i),n(this),this},abort:function(){return null==this._error&&a(this,new Error("abort")),this},await:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=function(i,n){t.apply(null,[i].concat(n))},s(this),this},awaitAll:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,s(this),this}},t.version=_,t.queue=o});
function _LocationMarker(t){function i(t){this.position=t.position,this.radius=0;var i=this.div=document.createElement("div");i.id="location-marker",i.style.position="absolute",i.style.display=t.visible?"block":"none",this.setMap(t.map)}return i.prototype=new t.maps.OverlayView,i.prototype.onAdd=function(){var t=this.getPanes();t.overlayImage.appendChild(this.div)},i.prototype.draw=function(){this.setPosition(this.position),this.setRadius(this.radius)},i.prototype.getPosition=function(){return this.position},i.prototype.setPosition=function(t){if(t){this.position=t;var i=this.getProjection().fromLatLngToDivPixel(t),o=this.div;i&&(o.style.left=i.x+"px",o.style.top=i.y+"px")}},i.prototype.setRadius=function(i){if(i){this.radius=i;var o=this.position,s=t.maps.geometry.spherical.computeOffset(o,i,0),e=this.getProjection(),n=e.fromLatLngToDivPixel(o),a=e.fromLatLngToDivPixel(s),r=Math.abs(n.y-a.y);r-=this.div.clientWidth/2,this.div.style.borderWidth=Math.max(r,0)+"px"}},i.prototype.setVisible=function(t){this.div.style.display=t?"block":"none"},i.prototype.drawCompass=function(){this.div.classList.add("compass")},i.prototype.setCompassHeading=function(t){var i="translate3d(-50%, -50%, 0) rotate("+t+"deg)";this.div.style.webkitTransform&&(this.div.style.webkitTransform=i),this.div.style.transform=i},i}
function renderTaxiStands(){var e={url:"assets/taxi-stand.png",size:new google.maps.Size(30,46),scaledSize:new google.maps.Size(15,23),anchor:new google.maps.Point(7.5,23)};_.forEach(taxiStandsOnMap,function(a){var t=a[0],i=a[1];new google.maps.Marker({position:new google.maps.LatLng(t,i),icon:e,map:map,clickable:!1,zIndex:100*(90-t)})})}function renderTaxis(){$infoTaxis.className="loading",fetch("https://api.data.gov.sg/v1/transport/taxi-availability",{headers:{"api-key":"QSlWniO8ADQu2BmiVAEueFIxHF4GcaQ9"}}).then(function(e){return e.json()}).then(function(e){if($infoTaxis.className="",!e||!e.features)throw Error(e);var a=e.features[0].geometry.coordinates.map(function(e){return""+e[1]+","+e[0]}),t=[],i=[],n=Object.keys(taxisOnMap);if(taxisOnMap&&n.length){var o=d3_queue.queue(50);_.forEach(n,function(e){a.indexOf(e)<0?i.push(e):o.defer(function(a){taxisOnMap[e].setOpacity(.5),setTimeout(a,1)})}),_.forEach(a,function(e){taxisOnMap[e]||t.push(e)})}else t=a;i.length>t.length&&_.forEach(i.splice(t.length),function(e){taxisOnMap[e].setMap(null),delete taxisOnMap[e]}),markersVisible=map.getZoom()>=14;var s={url:"assets/taxi.png",size:new google.maps.Size(18,16),scaledSize:new google.maps.Size(9,8),anchor:new google.maps.Point(4.5,4)},o=d3_queue.queue(50);_.forEach(t,function(e,a){taxisOnMap[e]||o.defer(function(t){var n=e.split(","),o=new google.maps.LatLng(n[0],n[1]),r=i[a];if(r){var c=taxisOnMap[r];c.setPosition(o),c.setVisible(markersVisible),c.setOpacity(1),taxisOnMap[e]=c,delete taxisOnMap[r],t()}else taxisOnMap[e]=new google.maps.Marker({position:o,icon:s,clickable:!1,map:map,zIndex:1,visible:markersVisible}),setTimeout(t,1)})}),o.awaitAll(function(){renderTaxisInfo(),setTimeout(renderTaxis,6e4)})})["catch"](function(e){console.error(e),setTimeout(renderTaxis,1e4),$infoTaxis.className=""})}function renderTaxisInfo(){var e=Object.keys(taxisOnMap);if(currentLocation){var a=0;_.forEach(e,function(e){var t=e.split(","),i=new google.maps.LatLng(t[0],t[1]),n=google.maps.geometry.spherical.computeDistanceBetween(currentLocation,i);fiveMinDistance>=n&&a++});var t,i=1/0;if(_.forEach(taxiStandsOnMap,function(e){var a=new google.maps.LatLng(e[0],e[1]),n=google.maps.geometry.spherical.computeDistanceBetween(currentLocation,a);i>n&&(i=n,t=a)}),a&&($infoTaxis.innerHTML="<b>"+a+" available taxis</b> around you."),t){var n=Math.ceil(i/80);$infoTaxis.innerHTML+="<br>Nearest taxi stand is about <b>"+n+" minute"+(1==n?"":"s")+"</b> walk away."}}else $infoTaxis.innerHTML=e.length+" available taxis!"}function initMap(){map=new google.maps.Map($map,{backgroundColor:"#B3D1FF",disableDefaultUI:!0,keyboardShortcuts:!0,maxZoom:16}),map.fitBounds(mapBounds);var e=$("bounds-warning");if(map.addListener("bounds_changed",function(){var a=map.getBounds();a.intersects(mapBounds)?e.classList.remove("visible"):e.classList.add("visible")}),$("back-sg").addEventListener("click",function(){e.classList.remove("visible"),map.fitBounds(mapBounds)},!1),renderTaxiStands(),renderTaxis(),map.addListener("zoom_changed",function(){var e=map.getZoom()>=14;markersVisible!=e&&(_.forEach(taxisOnMap,function(a){a.setVisible(e)}),markersVisible=e)}),navigator.geolocation){var a=_LocationMarker(google),t=new a({visible:!1,map:map}),i=new google.maps.Circle({strokeColor:"#4285f4",strokeOpacity:.5,strokeWeight:3,fillColor:"#4285f4",fillOpacity:.1,map:map,radius:fiveMinDistance,clickable:!1,visible:!1}),n=$("nearest-station"),o=$("location");o.style.display="block";var s,r=!1,c=function(){navigator.geolocation.clearWatch(s),r=!1,currentLocation=!1,t.setVisible(!1),i.setVisible(!1),o.classList.remove("active"),n.classList.remove("show"),renderTaxisInfo()};o.addEventListener("click",function(){if(o.classList.add("active"),r){var e=t.getPosition();e.equals(map.getCenter())?map.getZoom()<16&&map.setZoom(16):map.panTo(e)}else s=navigator.geolocation.watchPosition(function(e){var a=e.coords;currentLocation=new google.maps.LatLng(a.latitude,a.longitude),t.setPosition(currentLocation),t.setRadius(a.accuracy),t.setVisible(!0),i.setCenter(currentLocation),i.setVisible(!0),r||map.panTo(currentLocation),r=!0,sessionStorage["taxirouter-sg:watch-location"]=1;var n=new google.maps.LatLngBounds(new google.maps.LatLng(mapBounds.south,mapBounds.west),new google.maps.LatLng(mapBounds.north,mapBounds.east));return n.contains(currentLocation)?void renderTaxisInfo():void c()},function(e){c(),alert("Unable to get your location. Please try again.")},{enableHighAccuracy:!0,timeout:6e4,maximumAge:5e3})},!1),sessionStorage["taxirouter-sg:watch-location"]&&setTimeout(function(){o.click()},1e3),map.addListener("dragstart",function(){o.classList.remove("active")}),window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",function(e){r&&e&&null!==e.alpha&&(t.drawCompass(),t.setCompassHeading(e.webkitCompassHeading||e.alpha))},!1)}}var $=function(e){return document.getElementById(e)},$map=$("map"),$infoTaxis=$("info-taxis"),map,taxisOnMap={},markersVisible=!1,currentLocation,mapBounds={south:1.2513146,west:103.67828510000004,north:1.4490928,east:103.99178865},fiveMinDistance=400,$about=$("about"),$aboutOkay=$("about-okay"),$header=$("heading"),toggleAbout=function(){$about.classList.toggle("show")};$header.addEventListener("click",toggleAbout,!1),$aboutOkay.addEventListener("click",toggleAbout,!1),window.localStorage&&!localStorage["taxirouter-sg:about"]&&($about.classList.add("show"),localStorage["taxirouter-sg:about"]=1);</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDpk0BS7iLdbn5U545tiIN12k1OCgj2cc4&amp;libraries=geometry&amp;callback=initMap"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-23235796-7', 'auto');
ga('send', 'pageview');
</script>
