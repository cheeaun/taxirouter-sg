<!DOCTYPE html><html><head><title>TaxiRouter SG - live available taxi locations in Singapore</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<script>if (/cheeaun\.github/i.test(location.hostname)) location = 'https://taxirouter.sg/';</script>
<meta name="description" content="Explore available taxis and taxi stands in Singapore">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="TaxiRouter SG">
<!-- metacrap: https://adactio.com/journal/9881 -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="TaxiRouter SG">
<meta name="twitter:url" property="og:url" content="https://taxirouter.sg">
<meta name="twitter:title" property="og:title" content="TaxiRouter SG">
<meta name="twitter:description" property="og:description" content="Explore available taxis and taxi stands in Singapore">
<meta name="twitter:image" property="og:image" content="https://taxirouter.sg/assets/preview.png">
<!-- end metacrap -->
<style>body,html{height:100%;margin:0;padding:0;background-color:#b3d1ff}body,button,input{font-family:Roboto,sans-serif}a{color:#4285f4;text-decoration:none}a:hover{text-decoration:underline}button{font-size:1em;cursor:pointer;border:1px solid #4285f4;border-radius:5px;padding:10px;color:#4285f4;background-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:active{color:#fff;background-color:#4285f4}*{box-sizing:border-box}header{padding:10px;cursor:pointer;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;z-index:1}header:active{opacity:.7}header h1{margin:0;padding:0;-webkit-filter:drop-shadow(0 2px 4px rgba(0,0,0,.2));filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}header svg{vertical-align:top}#about{color:#333;background-color:rgba(255,255,255,.9);position:absolute;top:0;left:0;width:100%;max-height:100%;overflow:auto;z-index:2;padding:5px 10px 5px;-webkit-transition:-webkit-transform .3s cubic-bezier(.15,.78,.18,1.17);transition:transform .3s cubic-bezier(.15,.78,.18,1.17);-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0);pointer-events:none}#about.show{transform:translate3d(0,0,0);-webkit-transform:translate3d(0,0,0);pointer-events:auto;box-shadow:0 1px 15px rgba(0,0,0,.3)}@media screen and (min-width:500px) and (min-height:500px){#about{width:500px;left:50%;margin-left:-250px;border-radius:5px}#about.show{transform:translate3d(0,10px,0);-webkit-transform:translate3d(0,10px,0)}}#about h2{color:#111;margin:0;padding:5px 0;font-size:1.3em;font-weight:100}#about p{margin:0;padding:0 0 5px}#about ul{list-style:none;margin:0 0 5px;padding:0}#about ul li{display:inline-block;margin-right:1em}#about ul li img{vertical-align:middle;margin:0 3px}#about button{width:100%;margin:5px 0}#preview{float:right;border:1px solid #999;margin-left:10px;margin-top:5px}#map{height:100%}#info-taxis{font-size:.8em;font-weight:300;position:absolute;bottom:24px;right:68px;margin-left:10px;border-radius:5px;padding:10px;text-align:right;background-color:rgba(255,255,255,.9);-webkit-transition:opacity .3s;transition:opacity .3s}#info-taxis b{font-weight:500}#info-taxis.loading{-webkit-animation:blink .75s linear infinite alternate;animation:blink .75s linear infinite alternate}@-webkit-keyframes blink{0%{opacity:1}50%{opacity:.2}100%{opacity:1}}@keyframes blink{0%{opacity:1}50%{opacity:.2}100%{opacity:1}}#location{display:none;outline:0;position:absolute;bottom:20px;right:10px;z-index:1;border:0;padding:12px;margin:0;width:48px;height:48px;background-color:#fff;border-radius:50%;overflow:hidden;box-shadow:0 2px 4px rgba(0,0,0,.2);vertical-align:top}#location svg{fill:#666}#location.active svg{fill:#4285f4}#location-marker{-webkit-transition:border-width .3s;transition:border-width .3s;box-sizing:content-box;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);width:16px;height:16px;border-radius:50%;background-color:#4285f4;box-shadow:inset 0 0 0 2px #fff;border:10px solid rgba(66,133,244,.2);background-clip:content-box;pointer-events:none}#location-marker.compass:after{content:'';display:inline-block;border-left:4px solid transparent;border-bottom:6px solid #4285f4;border-right:4px solid transparent;width:0;height:0;position:absolute;left:4px;top:-6px}#bounds-warning{position:absolute;bottom:30px;left:10px;display:none;padding:10px;background-color:rgba(0,0,0,.7);-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);color:#fff}#bounds-warning button{display:inline;padding:0;border:0;color:#fff;text-decoration:underline}#bounds-warning.visible{display:block}</style>
<link rel="canonical" href="https://taxirouter.sg">
<link rel="dns-prefetch" href="https://data.gov.sg">
</head><body><header id="heading">
  <h1>
    <svg viewBox="0 0 48 48" width="48" height="48">
      <title>TaxiRouter SG</title>
      <circle cx="24" cy="24" r="22.7" fill="#fff" stroke="#00454d" stroke-width="2.6"/>
      <path fill="#00454d" d="M32.92 16.28c-.26-.76-.98-1.302-1.83-1.302h-3.223V12.4h-7.734v2.578H16.91c-.85 0-1.558.54-1.83 1.302L12.4 24v10.31c0 .71.58 1.29 1.29 1.29h1.288c.71 0 1.29-.58 1.29-1.29v-1.288h15.465v1.29c0 .708.58 1.288 1.29 1.288h1.288c.71 0 1.29-.58 1.29-1.29V24l-2.68-7.72zM16.91 29.156c-1.07 0-1.932-.864-1.932-1.934 0-1.07.863-1.933 1.933-1.933s1.94.86 1.94 1.93c0 1.07-.86 1.93-1.93 1.93zm14.18 0c-1.07 0-1.934-.864-1.934-1.934 0-1.07.863-1.933 1.933-1.933s1.93.86 1.93 1.93c0 1.07-.87 1.93-1.94 1.93zM14.977 22.71l1.933-5.8h14.18l1.932 5.8H14.978z"/>
      <circle cx="38.4" cy="38.4" r="9.6" fill="#ef2c2e"/>
      <path fill="#fff" d="M35.042 42.152c-.563 0-1.102-.096-1.616-.287-.514-.19-.99-.485-1.428-.88l.772-.918c.354.306.712.54 1.073.704.36.17.772.25 1.23.25.396 0 .71-.08.943-.25.233-.16.35-.39.35-.66v-.02c0-.13-.024-.25-.07-.35-.044-.1-.128-.19-.25-.28-.122-.09-.29-.17-.5-.25-.213-.07-.49-.15-.832-.23-.39-.09-.736-.19-1.04-.3-.302-.11-.556-.25-.762-.41-.205-.16-.362-.36-.47-.6-.108-.23-.162-.52-.162-.85v-.02c0-.32.062-.6.186-.86s.295-.49.51-.67c.218-.18.48-.33.785-.43.31-.1.64-.16 1-.16.54 0 1.02.08 1.45.24.43.16.83.39 1.21.69l-.68.97c-.33-.24-.66-.43-.99-.56-.32-.13-.65-.19-.99-.19-.37 0-.66.09-.87.25-.2.17-.31.37-.31.62v.02c0 .14.03.26.08.37.05.11.14.21.27.29.13.09.31.17.54.25.23.08.51.16.86.24.39.1.73.21 1.02.32.3.12.54.26.74.43.2.17.35.37.45.6.1.23.15.49.15.79 0 .34-.06.65-.19.92s-.3.5-.53.69c-.23.19-.5.33-.82.43-.32.1-.67.15-1.05.15m6.71.02c-.57 0-1.08-.09-1.55-.28-.46-.19-.86-.46-1.19-.79-.33-.34-.58-.74-.76-1.19-.18-.46-.27-.95-.27-1.49v-.02c0-.51.09-.99.27-1.45.19-.46.45-.86.79-1.21.34-.34.74-.62 1.2-.82.46-.2.97-.3 1.52-.3.32 0 .61.02.87.07.26.04.5.11.72.19.22.08.43.18.63.3s.39.26.58.42l-.81.97c-.14-.12-.28-.23-.43-.32-.15-.1-.3-.18-.46-.25-.16-.07-.34-.12-.53-.16-.19-.04-.4-.06-.63-.06-.33 0-.64.07-.93.21-.29.14-.54.32-.75.56-.21.23-.38.5-.5.82-.12.31-.18.64-.18.99v.02c0 .38.06.72.18 1.04.12.32.29.6.51.83.22.23.48.41.78.55.3.13.64.2 1.02.2.35 0 .67-.05.97-.15.31-.1.57-.23.79-.4v-1.4h-1.9v-1.11h3.1v3.07c-.18.15-.38.3-.6.44-.21.14-.45.26-.7.37-.25.11-.53.19-.82.25-.29.06-.59.09-.91.09"/>
    </svg>
  </h1>
</header>
<div id="about">
  <img id="preview" src="assets/preview.png" width="160" height="160" alt="">
  <h2>TaxiRouter SG</h2>
  <p><strong>Explore</strong> available taxis and taxi stands in Singapore. Observe <strong>live</strong> available taxi locations. <b>Zoom in</b> to see how many available taxis are around you and how far is the nearest taxi stand.</p>
  <p><a href="https://github.com/cheeaun/taxirouter-sg" target="_blank">Yet another project</a> by <a href="https://twitter.com/cheeaun" target="_blank">@cheeaun</a>. <a href="http://cheeaun.com/blog/2016/03/building-taxirouter-sg/" target="_blank">Read the story on how this is built</a>. Data is copyrighted by the <a href="http://www.lta.gov.sg/" target="_blank">Land Transport Authority</a>.</p>
  <p>Sister sites: <a href="https://busrouter.sg/" target="_blank">&#x1F68D; BusRouter SG</a> <a href="https://railrouter.sg/" target="_blank">&#x1F686; RailRouter SG</a></p>
  <h2>Legend</h2>
  <ul>
    <li><img src="assets/taxi-stand.png" width="15" height="23" alt=""> Taxi stand</li>
    <li><img src="assets/taxi.png" width="9" height="8" alt=""> Taxi</li>
    <li><img src="assets/taxi.png" width="9" height="8" alt="" style="opacity: .5"> Stationary taxi</li>
  </ul>
  <p><small>Note: &apos;Stationary taxi&apos; is a taxi that hasn&apos;t moved from the its location for one minute.</small></p>
  <p><button id="about-okay" ontouchstart="">Okay</button></p>
</div>
<div id="map"></div>
<button id="location" title="Show current location">
  <svg width="24" height="24" viewBox="0 0 24 24">
    <path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>
  </svg>
</button>
<div id="info-taxis">Loading&#x2026;</div>
<div id="bounds-warning">Looks like you&apos;re lost.<br><button id="back-sg">Go back to Singapore</button>.</div>
<script>var taxiStandsOnMap=[[1.30429251101406,103.83387234072],[1.30364031324823,103.836057298702],[1.30705658427793,103.835693718294],[1.30452165570791,103.835930874103],[1.30456462093248,103.835546677871],[1.30303742217855,103.83765495747],[1.30198731673367,103.835799465402],[1.30371290605001,103.832751722991],[1.30232574695198,103.834397136841],[1.30120337531623,103.839571139812],[1.30287430859384,103.840586035522],[1.30090718307585,103.842266084874],[1.30257832712301,103.840960744274],[1.30025866050311,103.845488177553],[1.30050680633466,103.845223256871],[1.29930873943486,103.847327169012],[1.29815662992004,103.844954718055],[1.29698851682493,103.843945010584],[1.29980843622966,103.842366680253],[1.30031769005559,103.840325880621],[1.29865536276609,103.849373495468],[1.30055972591397,103.849682236075],[1.30295008824425,103.85096346414],[1.30151265890506,103.852377477233],[1.2985006805551,103.850282255203],[1.29768272298103,103.849098998462],[1.2975294955709,103.849353257593],[1.29617233399305,103.850414072502],[1.29807150568094,103.852195771133],[1.29998360991225,103.852655217489],[1.29826134856261,103.855300383639],[1.29894453297921,103.856390064813],[1.29710383108526,103.856926642278],[1.29624719984175,103.85539290285],[1.29737643300251,103.852943136075],[1.29562777476712,103.852624360399],[1.30012318744093,103.851245578793],[1.29121268923792,103.845992154615],[1.29177315666165,103.845263369874],[1.29111387313995,103.844979796753],[1.29073604580684,103.844971511221],[1.29465884235551,103.848092284926],[1.2942109389154,103.849276461011],[1.29187361712363,103.849478388053],[1.29197869865702,103.850370848721],[1.29115532879644,103.850466197796],[1.28760592304216,103.852011934768],[1.29114020012761,103.853887608599],[1.2913250595032,103.851509689713],[1.29273255393444,103.851440019675],[1.2935184503127,103.852693883979],[1.29426458546323,103.852756521798],[1.29437678787745,103.853733300557],[1.29330014202904,103.853675972427],[1.29543699354907,103.858698372944],[1.29492439269757,103.859553594449],[1.29262371295208,103.860593487566],[1.29155225049403,103.859887275298],[1.29139138284688,103.858356643234],[1.29180512767506,103.857439640066],[1.28982563808021,103.856581346912],[1.29280234412988,103.856733448259],[1.29630527715055,103.846001470387],[1.28040038369394,103.840582933231],[1.27886257384486,103.841818487018],[1.28206841727511,103.840854925149],[1.28178206052514,103.841681244819],[1.28363646069435,103.842314857654],[1.28536568536571,103.843198771366],[1.28609647427804,103.843934700241],[1.28547620680909,103.844743305286],[1.28741244899171,103.84476283019],[1.28918484589333,103.842618875804],[1.28921666575511,103.844126139158],[1.2890266029571,103.845928070128],[1.2889512123112,103.848150185878],[1.28840728799318,103.84749234893],[1.28697215748064,103.847020924218],[1.28253210794219,103.84534778464],[1.28126999002797,103.844337825731],[1.28286546740439,103.84404706879],[1.28428858776696,103.844038244737],[1.28247781918789,103.846262399419],[1.28350816024261,103.843272028393],[1.28514181015025,103.847431204813],[1.28349422554159,103.846582674268],[1.28584653738451,103.848587843337],[1.28422258746945,103.850262115505],[1.28144232577785,103.847443925376],[1.28253566711523,103.848778080785],[1.27895794376436,103.848018730157],[1.2800707607133,103.848666499783],[1.28210362779366,103.849897903554],[1.28348118708103,103.851239838467],[1.28575962794076,103.853717432581],[1.28522773490074,103.852182321829],[1.27816220507103,103.848509300564],[1.27942694804677,103.849288151202],[1.28160808749498,103.851470609648],[1.28124217521129,103.852151501022],[1.27901508799806,103.849874228117],[1.27745186202144,103.848888122367],[1.27464603568998,103.846992510702],[1.27875668993253,103.844169072884],[1.27785901543147,103.843119599294],[1.27422682548758,103.842011388214],[1.27512362438661,103.843313313157],[1.27578545319013,103.843242407843],[1.27835562881702,103.84508131647],[1.27345494090479,103.843779616283],[1.27382905941209,103.845023638505],[1.27574664904182,103.846184991128],[1.27730149272449,103.847527033695],[1.28418877920079,103.852737971828],[1.28799130416516,103.848912190025],[1.27787170762217,103.843722867275],[1.28685389981132,103.848807630899],[1.28043066615895,103.850687901883],[1.28342933345672,103.85282628302079],[1.2787643196673,103.84383197198764],[1.38201956220883,103.844544760759],[1.37011680755576,103.849249165493],[1.35064124611013,103.849145624618],[1.35139355898837,103.847751088882],[1.35153997158924,103.848112044527],[1.33420736240968,103.850395554463],[1.34103786292502,103.846038678868],[1.33378960563771,103.847067121877],[1.33118361060148,103.849731707365],[1.35493312006533,103.83131858099],[1.32281877961387,103.855022923731],[1.32469139610575,103.850804611434],[1.38338689258473,103.884866285951],[1.31825710100276,103.863421901037],[1.30694359577781,103.862553816484],[1.31978779067631,103.8619107552],[1.31086798265317,103.854855947083],[1.31090083119856,103.855976800881],[1.30321523073406,103.861428623869],[1.30295363191655,103.864770049764],[1.29960155793034,103.8633093012],[1.30521746517692,103.851619496856],[1.30346274389145,103.853056217115],[1.31640274596551,103.835680504393],[1.30570613468817,103.849466020668],[1.30702761730185,103.84999151155],[1.31281691307843,103.853430969361],[1.26462285529129,103.820610240425],[1.27620578703704,103.82017831635],[1.26589171568534,103.821504995893],[1.27850229295971,103.834613647793],[1.28106965308459,103.83923085771],[1.28880444137122,103.834788338807],[1.28656044626585,103.827906281357],[1.28468738161671,103.832600325392],[1.28285666560423,103.816904333926],[1.27409678101459,103.824881956194],[1.28922698782741,103.817183017467],[1.30247814614698,103.798709766255],[1.30236444160154,103.797990258551],[1.2950323416851,103.805529976741],[1.29422821938586,103.806501020838],[1.28828181267061,103.80344541129],[1.30641446598866,103.790195997629],[1.29334161406726,103.825128103091],[1.29990623117205,103.822661638265],[1.30515143316239,103.830413486679],[1.30726269670246,103.82913505882],[1.30737440136464,103.820086626041],[1.30722105839897,103.833260002388],[1.31193941548,103.837714785686],[1.31220498806888,103.837466221531],[1.30643505812543,103.826829601391],[1.30517936255322,103.824069949702],[1.32155434412126,103.814535907055],[1.33769592088785,103.83948529235],[1.26497,103.82307],[1.33252529604359,103.868956140587],[1.33162040663414,103.869362831205],[1.33904082961601,103.870544100226],[1.3532574092896,103.870633511689],[1.3509951192406,103.872823868701],[1.35064962891504,103.874316700695],[1.34947087540943,103.874123133099],[1.35152785589167,103.864668030681],[1.35457543114927,103.877165572661],[1.35980625308547,103.884366032897],[1.35956044888902,103.884689456201],[1.37145326525464,103.892586093925],[1.38265352177454,103.893189212891],[1.38248036427324,103.89293396663],[1.38531835849613,103.90126216014],[1.39247875930078,103.895611691027],[1.39269112558388,103.896004248686],[1.39072520526225,103.895177298646],[1.40565348941188,103.901921255914],[1.40483423034297,103.902646405824],[1.41956340864069,103.864645163562],[1.37236128171586,103.948711679146],[1.37270370763084,103.949737794757],[1.31176679451075,103.787885176419],[1.31015380574819,103.792999447198],[1.31004259901136,103.795433986026],[1.31782171735428,103.786077434806],[1.31731582190959,103.807223557845],[1.34323207217204,103.775747865198],[1.4171176157976,103.833028363828],[1.42887732124926,103.835171681874],[1.43029754760739,103.834575583921],[1.42937305212216,103.836768990917],[1.4589896841015,103.829857142122],[1.44181998970666,103.824378024257],[1.44938297069083,103.820233436663],[1.44101730946656,103.80134402714],[1.43720710992823,103.787228039509],[1.43642610917054,103.785067072321],[1.44359748657376,103.769585603936],[1.43239290772013,103.77379091699],[1.42561248188864,103.762273387818],[1.4219620705613,103.761163798858],[1.38970492435793,103.986741800399],[1.3358126638666,103.960849641193],[1.35232044254886,103.945189862184],[1.34247211029648,103.952822166945],[1.32680767718394,103.946271977177],[1.32729181077614,103.94596319775],[1.32450273190175,103.931477153745],[1.32363096079051,103.929532923134],[1.33106098400788,103.925224599944],[1.33809843799672,103.924036735496],[1.31206495035033,103.938631004254],[1.30817411128662,103.922605715552],[1.30517894855803,103.914781478711],[1.30485853994214,103.909010064601],[1.30217537889763,103.904863758429],[1.30385068066442,103.901395182311],[1.32074573869768,103.9124285657],[1.31773065744351,103.897985783481],[1.31725988619512,103.895241060737],[1.31475853356732,103.894055823822],[1.31470242564641,103.894299357187],[1.3182688354494,103.891799301916],[1.31848157860162,103.89329475005],[1.31918240728325,103.887282588659],[1.31597125693391,103.883154595275],[1.34239684293689,103.880348416617],[1.30864966860135,103.889484662444],[1.30143795122954,103.876041925861],[1.35860260502394,103.751490354444],[1.38427287921263,103.743798508905],[1.39716085402784,103.747531747627],[1.28374867003747,103.781211623366],[1.31141844617024,103.778143517761],[1.31140900063671,103.779156490511],[1.31425160644327,103.765360857385],[1.33231677185113,103.742679309513],[1.3335937382006,103.740605199084],[1.3501584451506,103.725065352927],[1.34295777055706,103.732062454655],[1.34453911381439,103.720806459054],[1.33809311867971,103.706547273572],[1.33797570886111,103.707038266053],[1.33905753045831,103.707011357932],[1.3377861621144,103.697685976483],[1.32758804456683,103.67876006073],[1.33072939816997,103.678484752704],[1.28328503345734,103.78170004311644]]
!function(t){"use strict";if(!t.fetch){var e={iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};s.prototype.append=function(t,e){t=n(t),e=i(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},s.prototype.delete=function(t){delete this.map[n(t)]},s.prototype.get=function(t){var e=this.map[n(t)];return e?e[0]:null},s.prototype.getAll=function(t){return this.map[n(t)]||[]},s.prototype.has=function(t){return this.map.hasOwnProperty(n(t))},s.prototype.set=function(t,e){this.map[n(t)]=[i(e)]},s.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(o){t.call(e,o,r,this)},this)},this)},s.prototype.keys=function(){var t=[];this.forEach(function(e,r){t.push(r)});var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r},s.prototype.values=function(){var t=[];this.forEach(function(e){t.push(e)});var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r},s.prototype.entries=function(){var t=[];this.forEach(function(e,r){t.push([r,e])});var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(r[Symbol.iterator]=function(){return r}),r},e.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},d.call(f.prototype),d.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t};var o=[301,302,303,307,308];l.redirect=function(t,e){if(-1===o.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},t.Headers=s,t.Request=f,t.Response=l,t.fetch=function(t,r){return new Promise(function(o,n){var i;i=f.prototype.isPrototypeOf(t)&&!r?t:new f(t,r);var a=new XMLHttpRequest;a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a,e=new s,t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var r=t.trim().split(":"),o=r.shift().trim(),n=r.join(":").trim();e.append(o,n)}),e),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},n="response"in a?a.response:a.responseText;o(new l(n,r))},a.onerror=function(){n(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&e.blob&&(a.responseType="blob"),i.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}function n(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function a(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function u(t){var e=new FileReader;return e.readAsArrayBuffer(t),h(e)}function d(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},e.blob?(this.blob=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(u)},this.text=function(){var t,e,r=a(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,(e=new FileReader).readAsText(t),h(e);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=a(this);return t||Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t,e){var o,n,i=(e=e||{}).body;if(f.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(o=e.method||this.method||"GET",n=o.toUpperCase(),r.indexOf(n)>-1?n:o),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function l(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof s?e.headers:new s(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this);
(function(){var t,r=200,e="Expected a function",n="__lodash_hash_undefined__",u=500,o=1,i=2,a=4,c=1,f=2,s=1/0,l=9007199254740991,h="[object Arguments]",p="[object Array]",v="[object AsyncFunction]",y="[object Boolean]",_="[object Date]",b="[object Error]",g="[object Function]",d="[object GeneratorFunction]",j="[object Map]",w="[object Number]",O="[object Null]",m="[object Object]",A="[object Promise]",z="[object Proxy]",S="[object RegExp]",x="[object Set]",k="[object String]",E="[object Symbol]",$="[object Undefined]",I="[object WeakMap]",L="[object ArrayBuffer]",F="[object DataView]",P="[object Float32Array]",T="[object Float64Array]",U="[object Int8Array]",B="[object Int16Array]",M="[object Int32Array]",C="[object Uint8Array]",R="[object Uint8ClampedArray]",D="[object Uint16Array]",N="[object Uint32Array]",V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/\\(\\)?/g,H=/\w*$/,J=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,Q={};Q[P]=Q[T]=Q[U]=Q[B]=Q[M]=Q[C]=Q[R]=Q[D]=Q[N]=!0,Q[h]=Q[p]=Q[L]=Q[y]=Q[F]=Q[_]=Q[b]=Q[g]=Q[j]=Q[w]=Q[m]=Q[S]=Q[x]=Q[k]=Q[I]=!1;var X={};X[h]=X[p]=X[L]=X[F]=X[y]=X[_]=X[P]=X[T]=X[U]=X[B]=X[M]=X[j]=X[w]=X[m]=X[S]=X[x]=X[k]=X[E]=X[C]=X[R]=X[D]=X[N]=!0,X[b]=X[g]=X[I]=!1;var Y="object"==typeof global&&global&&global.Object===Object&&global,Z="object"==typeof self&&self&&self.Object===Object&&self,tt=Y||Z||Function("return this")(),rt="object"==typeof exports&&exports&&!exports.nodeType&&exports,et=rt&&"object"==typeof module&&module&&!module.nodeType&&module,nt=et&&et.exports===rt,ut=nt&&Y.process,ot=function(){try{return ut&&ut.binding&&ut.binding("util")}catch(t){}}(),it=ot&&ot.isMap,at=ot&&ot.isSet,ct=ot&&ot.isTypedArray;function ft(t,r){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==r(t[e],e,t););return t}function st(t,r){for(var e=-1,n=r.length,u=t.length;++e<n;)t[u+e]=r[e];return t}function lt(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function ht(t){return function(r){return t(r)}}function pt(t){var r=-1,e=Array(t.size);return t.forEach(function(t,n){e[++r]=[n,t]}),e}function vt(t,r){return function(e){return t(r(e))}}function yt(t){var r=-1,e=Array(t.size);return t.forEach(function(t){e[++r]=t}),e}var _t,bt=Array.prototype,gt=Function.prototype,dt=Object.prototype,jt=tt["__core-js_shared__"],wt=gt.toString,Ot=dt.hasOwnProperty,mt=(_t=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||""))?"Symbol(src)_1."+_t:"",At=dt.toString,zt=RegExp("^"+wt.call(Ot).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),St=nt?tt.Buffer:t,xt=tt.Symbol,kt=tt.Uint8Array,Et=St?St.allocUnsafe:t,$t=vt(Object.getPrototypeOf,Object),It=Object.create,Lt=dt.propertyIsEnumerable,Ft=bt.splice,Pt=xt?xt.toStringTag:t,Tt=function(){try{var t=Fr(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ut=Object.getOwnPropertySymbols,Bt=St?St.isBuffer:t,Mt=vt(Object.keys,Object),Ct=Fr(tt,"DataView"),Rt=Fr(tt,"Map"),Dt=Fr(tt,"Promise"),Nt=Fr(tt,"Set"),Vt=Fr(tt,"WeakMap"),Wt=Fr(Object,"create"),qt=Gr(Ct),Gt=Gr(Rt),Ht=Gr(Dt),Jt=Gr(Nt),Kt=Gr(Vt),Qt=xt?xt.prototype:t,Xt=Qt?Qt.valueOf:t,Yt=Qt?Qt.toString:t;function Zt(){}var tr=function(){function r(){}return function(e){if(!ee(e))return{};if(It)return It(e);r.prototype=e;var n=new r;return r.prototype=t,n}}();function rr(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function er(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function nr(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function ur(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new nr;++r<e;)this.add(t[r])}function or(t){var r=this.__data__=new er(t);this.size=r.size}function ir(t,r){var e=Xr(t),n=!e&&Qr(t),u=!e&&!n&&Zr(t),o=!e&&!n&&!u&&ae(t),i=e||n||u||o,a=i?function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}(t.length,String):[],c=a.length;for(var f in t)!r&&!Ot.call(t,f)||i&&("length"==f||u&&("offset"==f||"parent"==f)||o&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Br(f,c))||a.push(f);return a}function ar(r,e,n){var u=r[e];Ot.call(r,e)&&Kr(u,n)&&(n!==t||e in r)||fr(r,e,n)}function cr(t,r){for(var e=t.length;e--;)if(Kr(t[e][0],r))return e;return-1}function fr(t,r,e){"__proto__"==r&&Tt?Tt(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e}function sr(r,e,n,u,c,f){var s,l=e&o,p=e&i,v=e&a;if(n&&(s=c?n(r,u,c,f):n(r)),s!==t)return s;if(!ee(r))return r;var b,O,A,z,$,I,V,W,q,G=Xr(r);if(G){if(s=function(t){var r=t.length,e=new t.constructor(r);r&&"string"==typeof t[0]&&Ot.call(t,"index")&&(e.index=t.index,e.input=t.input);return e}(r),!l)return function(t,r){var e=-1,n=t.length;r||(r=Array(n));for(;++e<n;)r[e]=t[e];return r}(r,s)}else{var J=Ur(r),K=J==g||J==d;if(Zr(r))return function(t,r){if(r)return t.slice();var e=t.length,n=Et?Et(e):new t.constructor(e);return t.copy(n),n}(r,l);if(J==m||J==h||K&&!c){if(s=p||K?{}:"function"!=typeof(q=r).constructor||Cr(q)?{}:tr($t(q)),!l)return p?($=r,W=r,I=(V=s)&&kr(W,he(W),V),kr($,Tr($),I)):(b=r,z=r,O=(A=s)&&kr(z,le(z),A),kr(b,Pr(b),O))}else{if(!X[J])return c?r:{};s=function(t,r,e){var n=t.constructor;switch(r){case L:return xr(t);case y:case _:return new n(+t);case F:return f=t,s=e?xr(f.buffer):f.buffer,new f.constructor(s,f.byteOffset,f.byteLength);case P:case T:case U:case B:case M:case C:case R:case D:case N:return a=t,c=e?xr(a.buffer):a.buffer,new a.constructor(c,a.byteOffset,a.length);case j:return new n;case w:case k:return new n(t);case S:return(i=new(o=t).constructor(o.source,H.exec(o))).lastIndex=o.lastIndex,i;case x:return new n;case E:return u=t,Xt?Object(Xt.call(u)):{}}var u;var o,i;var a,c;var f,s}(r,J,l)}}f||(f=new or);var Q=f.get(r);if(Q)return Q;if(f.set(r,s),oe(r))return r.forEach(function(t){s.add(sr(t,e,n,t,r,f))}),s;if(ue(r))return r.forEach(function(t,u){s.set(u,sr(t,e,n,u,r,f))}),s;var Y=G?t:(v?p?Ir:$r:p?he:le)(r);return ft(Y||r,function(t,u){Y&&(t=r[u=t]),ar(s,u,sr(t,e,n,u,r,f))}),s}rr.prototype.clear=function(){this.__data__=Wt?Wt(null):{},this.size=0},rr.prototype.delete=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},rr.prototype.get=function(r){var e=this.__data__;if(Wt){var u=e[r];return u===n?t:u}return Ot.call(e,r)?e[r]:t},rr.prototype.has=function(r){var e=this.__data__;return Wt?e[r]!==t:Ot.call(e,r)},rr.prototype.set=function(r,e){var u=this.__data__;return this.size+=this.has(r)?0:1,u[r]=Wt&&e===t?n:e,this},er.prototype.clear=function(){this.__data__=[],this.size=0},er.prototype.delete=function(t){var r=this.__data__,e=cr(r,t);return!(e<0||(e==r.length-1?r.pop():Ft.call(r,e,1),--this.size,0))},er.prototype.get=function(r){var e=this.__data__,n=cr(e,r);return n<0?t:e[n][1]},er.prototype.has=function(t){return cr(this.__data__,t)>-1},er.prototype.set=function(t,r){var e=this.__data__,n=cr(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this},nr.prototype.clear=function(){this.size=0,this.__data__={hash:new rr,map:new(Rt||er),string:new rr}},nr.prototype.delete=function(t){var r=Lr(this,t).delete(t);return this.size-=r?1:0,r},nr.prototype.get=function(t){return Lr(this,t).get(t)},nr.prototype.has=function(t){return Lr(this,t).has(t)},nr.prototype.set=function(t,r){var e=Lr(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this},ur.prototype.add=ur.prototype.push=function(t){return this.__data__.set(t,n),this},ur.prototype.has=function(t){return this.__data__.has(t)},or.prototype.clear=function(){this.__data__=new er,this.size=0},or.prototype.delete=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e},or.prototype.get=function(t){return this.__data__.get(t)},or.prototype.has=function(t){return this.__data__.has(t)},or.prototype.set=function(t,e){var n=this.__data__;if(n instanceof er){var u=n.__data__;if(!Rt||u.length<r-1)return u.push([t,e]),this.size=++n.size,this;n=this.__data__=new nr(u)}return n.set(t,e),this.size=n.size,this};var lr,hr,pr,vr=(lr=function(t,r){return t&&yr(t,r,le)},function(t,r){if(null==t)return t;if(!Yr(t))return lr(t,r);for(var e=t.length,n=hr?e:-1,u=Object(t);(hr?n--:++n<e)&&!1!==r(u[n],n,u););return t}),yr=function(t,r,e){for(var n=-1,u=Object(t),o=e(t),i=o.length;i--;){var a=o[pr?i:++n];if(!1===r(u[a],a,u))break}return t};function _r(r,e){for(var n=0,u=(e=Sr(e,r)).length;null!=r&&n<u;)r=r[qr(e[n++])];return n&&n==u?r:t}function br(t,r,e){var n=r(t);return Xr(t)?n:st(n,e(t))}function gr(r){return null==r?r===t?$:O:Pt&&Pt in Object(r)?function(r){var e=Ot.call(r,Pt),n=r[Pt];try{r[Pt]=t;var u=!0}catch(t){}var o=At.call(r);u&&(e?r[Pt]=n:delete r[Pt]);return o}(r):(e=r,At.call(e));var e}function dr(t,r){return null!=t&&r in Object(t)}function jr(t){return ne(t)&&gr(t)==h}function wr(r,e,n,u,o){return r===e||(null==r||null==e||!ne(r)&&!ne(e)?r!=r&&e!=e:function(r,e,n,u,o,i){var a=Xr(r),s=Xr(e),l=a?p:Ur(r),v=s?p:Ur(e),g=(l=l==h?m:l)==m,d=(v=v==h?m:v)==m,O=l==v;if(O&&Zr(r)){if(!Zr(e))return!1;a=!0,g=!1}if(O&&!g)return i||(i=new or),a||ae(r)?Er(r,e,n,u,o,i):function(t,r,e,n,u,o,i){switch(e){case F:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case L:return!(t.byteLength!=r.byteLength||!o(new kt(t),new kt(r)));case y:case _:case w:return Kr(+t,+r);case b:return t.name==r.name&&t.message==r.message;case S:case k:return t==r+"";case j:var a=pt;case x:var s=n&c;if(a||(a=yt),t.size!=r.size&&!s)return!1;var l=i.get(t);if(l)return l==r;n|=f,i.set(t,r);var h=Er(a(t),a(r),n,u,o,i);return i.delete(t),h;case E:if(Xt)return Xt.call(t)==Xt.call(r)}return!1}(r,e,l,n,u,o,i);if(!(n&c)){var A=g&&Ot.call(r,"__wrapped__"),z=d&&Ot.call(e,"__wrapped__");if(A||z){var $=A?r.value():r,I=z?e.value():e;return i||(i=new or),o($,I,n,u,i)}}if(!O)return!1;return i||(i=new or),function(r,e,n,u,o,i){var a=n&c,f=$r(r),s=f.length,l=$r(e).length;if(s!=l&&!a)return!1;for(var h=s;h--;){var p=f[h];if(!(a?p in e:Ot.call(e,p)))return!1}var v=i.get(r);if(v&&i.get(e))return v==e;var y=!0;i.set(r,e),i.set(e,r);for(var _=a;++h<s;){p=f[h];var b=r[p],g=e[p];if(u)var d=a?u(g,b,p,e,r,i):u(b,g,p,r,e,i);if(!(d===t?b===g||o(b,g,n,u,i):d)){y=!1;break}_||(_="constructor"==p)}if(y&&!_){var j=r.constructor,w=e.constructor;j!=w&&"constructor"in r&&"constructor"in e&&!("function"==typeof j&&j instanceof j&&"function"==typeof w&&w instanceof w)&&(y=!1)}return i.delete(r),i.delete(e),y}(r,e,n,u,o,i)}(r,e,n,u,wr,o))}function Or(t){return!(!ee(t)||(r=t,mt&&mt in r))&&(te(t)?zt:J).test(Gr(t));var r}function mr(r){return"function"==typeof r?r:null==r?pe:"object"==typeof r?Xr(r)?function(r,e){if(Mr(r)&&Rr(e))return Dr(qr(r),e);return function(n){var u=fe(n,r);return u===t&&u===e?se(n,r):wr(e,u,c|f)}}(r[0],r[1]):function(r){var e=function(t){var r=le(t),e=r.length;for(;e--;){var n=r[e],u=t[n];r[e]=[n,u,Rr(u)]}return r}(r);if(1==e.length&&e[0][2])return Dr(e[0][0],e[0][1]);return function(n){return n===r||function(r,e,n,u){var o=n.length,i=o,a=!u;if(null==r)return!i;for(r=Object(r);o--;){var s=n[o];if(a&&s[2]?s[1]!==r[s[0]]:!(s[0]in r))return!1}for(;++o<i;){var l=(s=n[o])[0],h=r[l],p=s[1];if(a&&s[2]){if(h===t&&!(l in r))return!1}else{var v=new or;if(u)var y=u(h,p,l,r,e,v);if(!(y===t?wr(p,h,c|f,u,v):y))return!1}}return!0}(n,r,e)}}(r):ye(r)}function Ar(t){if(!ee(t))return function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r}(t);var r=Cr(t),e=[];for(var n in t)("constructor"!=n||!r&&Ot.call(t,n))&&e.push(n);return e}function zr(t){if("string"==typeof t)return t;if(Xr(t))return function(t,r){for(var e=-1,n=null==t?0:t.length,u=Array(n);++e<n;)u[e]=r(t[e],e,t);return u}(t,zr)+"";if(ie(t))return Yt?Yt.call(t):"";var r=t+"";return"0"==r&&1/t==-s?"-0":r}function Sr(t,r){return Xr(t)?t:Mr(t,r)?[t]:Wr(ce(t))}function xr(t){var r=new t.constructor(t.byteLength);return new kt(r).set(new kt(t)),r}function kr(r,e,n,u){var o=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var c=e[i],f=u?u(n[c],r[c],c,n,r):t;f===t&&(f=r[c]),o?fr(n,c,f):ar(n,c,f)}return n}function Er(r,e,n,u,o,i){var a=n&c,s=r.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var h=i.get(r);if(h&&i.get(e))return h==e;var p=-1,v=!0,y=n&f?new ur:t;for(i.set(r,e),i.set(e,r);++p<s;){var _=r[p],b=e[p];if(u)var g=a?u(b,_,p,e,r,i):u(_,b,p,r,e,i);if(g!==t){if(g)continue;v=!1;break}if(y){if(!lt(e,function(t,r){if(e=r,!y.has(e)&&(_===t||o(_,t,n,u,i)))return y.push(r);var e})){v=!1;break}}else if(_!==b&&!o(_,b,n,u,i)){v=!1;break}}return i.delete(r),i.delete(e),v}function $r(t){return br(t,le,Pr)}function Ir(t){return br(t,he,Tr)}function Lr(t,r){var e,n,u=t.__data__;return("string"==(n=typeof(e=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?u["string"==typeof r?"string":"hash"]:u.map}function Fr(r,e){var n,u,o=(u=e,null==(n=r)?t:n[u]);return Or(o)?o:t}var Pr=Ut?function(t){return null==t?[]:(t=Object(t),function(t,r){for(var e=-1,n=null==t?0:t.length,u=0,o=[];++e<n;){var i=t[e];r(i,e,t)&&(o[u++]=i)}return o}(Ut(t),function(r){return Lt.call(t,r)}))}:_e,Tr=Ut?function(t){for(var r=[];t;)st(r,Pr(t)),t=$t(t);return r}:_e,Ur=gr;function Br(t,r){var e=typeof t;return!!(r=null==r?l:r)&&("number"==e||"symbol"!=e&&K.test(t))&&t>-1&&t%1==0&&t<r}function Mr(t,r){if(Xr(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!ie(t))||(W.test(t)||!V.test(t)||null!=r&&t in Object(r))}function Cr(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||dt)}function Rr(t){return t==t&&!ee(t)}function Dr(r,e){return function(n){return null!=n&&(n[r]===e&&(e!==t||r in Object(n)))}}(Ct&&Ur(new Ct(new ArrayBuffer(1)))!=F||Rt&&Ur(new Rt)!=j||Dt&&Ur(Dt.resolve())!=A||Nt&&Ur(new Nt)!=x||Vt&&Ur(new Vt)!=I)&&(Ur=function(r){var e=gr(r),n=e==m?r.constructor:t,u=n?Gr(n):"";if(u)switch(u){case qt:return F;case Gt:return j;case Ht:return A;case Jt:return x;case Kt:return I}return e});var Nr,Vr,Wr=(Nr=Jr(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(q,function(t,e,n,u){r.push(n?u.replace(G,"$1"):e||t)}),r},function(t){return Vr.size===u&&Vr.clear(),t}),Vr=Nr.cache,Nr);function qr(t){if("string"==typeof t||ie(t))return t;var r=t+"";return"0"==r&&1/t==-s?"-0":r}function Gr(t){if(null!=t){try{return wt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Hr(t,r){return(Xr(t)?ft:vr)(t,function(){var t=Zt.iteratee||ve;return t=t===ve?mr:t,arguments.length?t(arguments[0],arguments[1]):t}(r,3))}function Jr(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError(e);var n=function(){var e=arguments,u=r?r.apply(this,e):e[0],o=n.cache;if(o.has(u))return o.get(u);var i=t.apply(this,e);return n.cache=o.set(u,i)||o,i};return n.cache=new(Jr.Cache||nr),n}function Kr(t,r){return t===r||t!=t&&r!=r}Jr.Cache=nr;var Qr=jr(function(){return arguments}())?jr:function(t){return ne(t)&&Ot.call(t,"callee")&&!Lt.call(t,"callee")},Xr=Array.isArray;function Yr(t){return null!=t&&re(t.length)&&!te(t)}var Zr=Bt||be;function te(t){if(!ee(t))return!1;var r=gr(t);return r==g||r==d||r==v||r==z}function re(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=l}function ee(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}function ne(t){return null!=t&&"object"==typeof t}var ue=it?ht(it):function(t){return ne(t)&&Ur(t)==j},oe=at?ht(at):function(t){return ne(t)&&Ur(t)==x};function ie(t){return"symbol"==typeof t||ne(t)&&gr(t)==E}var ae=ct?ht(ct):function(t){return ne(t)&&re(t.length)&&!!Q[gr(t)]};function ce(t){return null==t?"":zr(t)}function fe(r,e,n){var u=null==r?t:_r(r,e);return u===t?n:u}function se(t,r){return null!=t&&function(t,r,e){for(var n=-1,u=(r=Sr(r,t)).length,o=!1;++n<u;){var i=qr(r[n]);if(!(o=null!=t&&e(t,i)))break;t=t[i]}return o||++n!=u?o:!!(u=null==t?0:t.length)&&re(u)&&Br(i,u)&&(Xr(t)||Qr(t))}(t,r,dr)}function le(t){return Yr(t)?ir(t):function(t){if(!Cr(t))return Mt(t);var r=[];for(var e in Object(t))Ot.call(t,e)&&"constructor"!=e&&r.push(e);return r}(t)}function he(t){return Yr(t)?ir(t,!0):Ar(t)}function pe(t){return t}function ve(t){return mr("function"==typeof t?t:sr(t,o))}function ye(r){return Mr(r)?(n=qr(r),function(r){return null==r?t:r[n]}):(e=r,function(t){return _r(t,e)});var e,n}function _e(){return[]}function be(){return!1}Zt.iteratee=ve,Zt.keys=le,Zt.keysIn=he,Zt.memoize=Jr,Zt.property=ye,Zt.eq=Kr,Zt.forEach=Hr,Zt.get=fe,Zt.hasIn=se,Zt.identity=pe,Zt.isArguments=Qr,Zt.isArray=Xr,Zt.isArrayLike=Yr,Zt.isBuffer=Zr,Zt.isFunction=te,Zt.isLength=re,Zt.isMap=ue,Zt.isObject=ee,Zt.isObjectLike=ne,Zt.isSet=oe,Zt.isSymbol=ie,Zt.isTypedArray=ae,Zt.stubArray=_e,Zt.stubFalse=be,Zt.toString=ce,Zt.each=Hr,Zt.VERSION="4.17.5",tt._=Zt}).call(this);
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.d3_queue=t.d3_queue||{})}(this,function(t){"use strict";var i=[].slice,n={};function r(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function e(t){if(!t._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var i=t._ended+t._active,r=t._tasks[i],e=r.length-1,s=r[e];r[e]=a(t,i),--t._waiting,++t._active,r=s.apply(null,r),t._tasks[i]&&(t._tasks[i]=r||n)}}(t)}catch(i){t._tasks[t._ended+t._active-1]&&s(t,i)}}function a(t,i){return function(n,r){t._tasks[i]&&(--t._active,++t._ended,t._tasks[i]=null,null==t._error&&(null!=n?s(t,n):(t._data[i]=r,t._waiting?e(t):o(t))))}}function s(t,i){var n,r=t._tasks.length;for(t._error=i,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(i){}t._active=NaN,o(t)}function o(t){!t._active&&t._call&&t._call(t._error,t._data)}function _(t){return new r(arguments.length?+t:1/0)}r.prototype=_.prototype={constructor:r,defer:function(t){if("function"!=typeof t||this._call)throw new Error;if(null!=this._error)return this;var n=i.call(arguments,1);return n.push(t),++this._waiting,this._tasks.push(n),e(this),this},abort:function(){return null==this._error&&s(this,new Error("abort")),this},await:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=function(i,n){t.apply(null,[i].concat(n))},o(this),this},awaitAll:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,o(this),this}},t.version="2.0.3",t.queue=_});
function _LocationMarker(t){function i(t){this.position=t.position,this.radius=0;var i=this.div=document.createElement("div");i.id="location-marker",i.style.position="absolute",i.style.display=t.visible?"block":"none",this.setMap(t.map)}return i.prototype=new t.maps.OverlayView,i.prototype.onAdd=function(){this.getPanes().overlayImage.appendChild(this.div)},i.prototype.draw=function(){this.setPosition(this.position),this.setRadius(this.radius)},i.prototype.getPosition=function(){return this.position},i.prototype.setPosition=function(t){if(t){this.position=t;var i=this.getProjection().fromLatLngToDivPixel(t),o=this.div;i&&(o.style.left=i.x+"px",o.style.top=i.y+"px")}},i.prototype.setRadius=function(i){if(i){this.radius=i;var o=this.position,s=t.maps.geometry.spherical.computeOffset(o,i,0),e=this.getProjection(),n=e.fromLatLngToDivPixel(o),a=e.fromLatLngToDivPixel(s),r=Math.abs(n.y-a.y);r-=this.div.clientWidth/2,this.div.style.borderWidth=Math.max(r,0)+"px"}},i.prototype.setVisible=function(t){this.div.style.display=t?"block":"none"},i.prototype.drawCompass=function(){this.div.classList.add("compass")},i.prototype.setCompassHeading=function(t){var i="translate3d(-50%, -50%, 0) rotate("+t+"deg)";this.div.style.webkitTransform&&(this.div.style.webkitTransform=i),this.div.style.transform=i},i}
var map,currentLocation,$=function(e){return document.getElementById(e)},$map=$("map"),$infoTaxis=$("info-taxis"),taxisOnMap={},markersVisible=!1,mapBounds={south:1.2513146,west:103.67828510000004,north:1.4490928,east:103.99178865},fiveMinDistance=400,$about=$("about"),$aboutOkay=$("about-okay"),$header=$("heading"),toggleAbout=function(){$about.classList.toggle("show")};function renderTaxiStands(){var e={url:"assets/taxi-stand.png",size:new google.maps.Size(30,46),scaledSize:new google.maps.Size(15,23),anchor:new google.maps.Point(7.5,23)};_.forEach(taxiStandsOnMap,function(a){var t=a[0],i=a[1];new google.maps.Marker({position:new google.maps.LatLng(t,i),icon:e,map:map,clickable:!1,zIndex:100*(90-t)})})}function renderTaxis(){$infoTaxis.className="loading",fetch("https://api.data.gov.sg/v1/transport/taxi-availability",{headers:{"api-key":"QSlWniO8ADQu2BmiVAEueFIxHF4GcaQ9"}}).then(function(e){return e.json()}).then(function(e){if($infoTaxis.className="",!e||!e.features)throw Error(e);var a=e.features[0].geometry.coordinates.map(function(e){return e[1]+","+e[0]}),t=[],i=[],n=Object.keys(taxisOnMap);if(taxisOnMap&&n.length){var o=d3_queue.queue(50);_.forEach(n,function(e){a.indexOf(e)<0?i.push(e):o.defer(function(a){taxisOnMap[e].setOpacity(.5),setTimeout(a,1)})}),_.forEach(a,function(e){taxisOnMap[e]||t.push(e)})}else t=a;i.length>t.length&&_.forEach(i.splice(t.length),function(e){taxisOnMap[e].setMap(null),delete taxisOnMap[e]}),markersVisible=map.getZoom()>=13;var s={url:"assets/taxi.png",size:new google.maps.Size(18,16),scaledSize:new google.maps.Size(9,8),anchor:new google.maps.Point(4.5,4)};o=d3_queue.queue(50);_.forEach(t,function(e,a){taxisOnMap[e]||o.defer(function(t){var n=e.split(","),o=new google.maps.LatLng(n[0],n[1]),r=i[a];if(r){var c=taxisOnMap[r];c.setPosition(o),c.setVisible(markersVisible),c.setOpacity(1),taxisOnMap[e]=c,delete taxisOnMap[r],t()}else taxisOnMap[e]=new google.maps.Marker({position:o,icon:s,clickable:!1,map:map,zIndex:1,visible:markersVisible}),setTimeout(t,1)})}),o.awaitAll(function(){renderTaxisInfo(),setTimeout(renderTaxis,6e4)})}).catch(function(e){console.error(e),setTimeout(renderTaxis,1e4),$infoTaxis.className=""})}function renderTaxisInfo(){var e=Object.keys(taxisOnMap);if(currentLocation){var a,t=0;_.forEach(e,function(e){var a=e.split(","),i=new google.maps.LatLng(a[0],a[1]);google.maps.geometry.spherical.computeDistanceBetween(currentLocation,i)<=fiveMinDistance&&t++});var i=1/0;if(_.forEach(taxiStandsOnMap,function(e){var t=new google.maps.LatLng(e[0],e[1]),n=google.maps.geometry.spherical.computeDistanceBetween(currentLocation,t);n<i&&(i=n,a=t)}),t&&($infoTaxis.innerHTML="<b>"+t+" available taxis</b> around you."),a){var n=Math.ceil(i/80);$infoTaxis.innerHTML+="<br>Nearest taxi stand is about <b>"+n+" minute"+(1==n?"":"s")+"</b> walk away."}}else $infoTaxis.innerHTML=e.length+" available taxis!"}function initMap(){(map=new google.maps.Map($map,{backgroundColor:"#B3D1FF",disableDefaultUI:!0,keyboardShortcuts:!0,maxZoom:16,clickableIcons:!1,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]}]})).fitBounds(mapBounds);var e=$("bounds-warning");if(map.addListener("bounds_changed",function(){var a=map.getBounds();a&&(a.intersects(mapBounds)?e.classList.remove("visible"):e.classList.add("visible"))}),$("back-sg").addEventListener("click",function(){e.classList.remove("visible"),map.fitBounds(mapBounds)},!1),renderTaxiStands(),renderTaxis(),map.addListener("zoom_changed",function(){var e=map.getZoom()>=13;markersVisible!=e&&(_.forEach(taxisOnMap,function(a){a.setVisible(e)}),markersVisible=e)}),navigator.geolocation){var a=new(_LocationMarker(google))({visible:!1,map:map}),t=new google.maps.Circle({strokeColor:"#4285f4",strokeOpacity:.5,strokeWeight:3,fillColor:"#4285f4",fillOpacity:.1,map:map,radius:fiveMinDistance,clickable:!1,visible:!1}),i=$("nearest-station"),n=$("location");n.style.display="block";var o,s=!1,r=function(){navigator.geolocation.clearWatch(o),s=!1,currentLocation=!1,a.setVisible(!1),t.setVisible(!1),n.classList.remove("active"),i.classList.remove("show"),renderTaxisInfo()};n.addEventListener("click",function(){if(n.classList.add("active"),s){var e=a.getPosition();e.equals(map.getCenter())?map.getZoom()<16&&map.setZoom(16):map.panTo(e)}else o=navigator.geolocation.watchPosition(function(e){var i=e.coords;currentLocation=new google.maps.LatLng(i.latitude,i.longitude),a.setPosition(currentLocation),a.setRadius(i.accuracy),a.setVisible(!0),t.setCenter(currentLocation),t.setVisible(!0),s||map.panTo(currentLocation),s=!0,sessionStorage["taxirouter-sg:watch-location"]=1,new google.maps.LatLngBounds(new google.maps.LatLng(mapBounds.south,mapBounds.west),new google.maps.LatLng(mapBounds.north,mapBounds.east)).contains(currentLocation)?renderTaxisInfo():r()},function(e){r(),alert("Unable to get your location. Please try again.")},{enableHighAccuracy:!0,timeout:6e4,maximumAge:5e3})},!1),sessionStorage["taxirouter-sg:watch-location"]&&setTimeout(function(){n.click()},1e3),map.addListener("dragstart",function(){n.classList.remove("active")}),window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",function(e){s&&e&&null!==e.alpha&&(a.drawCompass(),a.setCompassHeading(e.webkitCompassHeading||e.alpha))},!1)}}$header.addEventListener("click",toggleAbout,!1),$aboutOkay.addEventListener("click",toggleAbout,!1),window.localStorage&&!localStorage["taxirouter-sg:about"]&&($about.classList.add("show"),localStorage["taxirouter-sg:about"]=1);</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDpk0BS7iLdbn5U545tiIN12k1OCgj2cc4&amp;libraries=geometry&amp;callback=initMap&amp;v=3.exp"></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-23235796-7', 'auto');
ga('send', 'pageview');
</script>
</body></html>